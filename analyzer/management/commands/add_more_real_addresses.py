from django.core.management.base import BaseCommand
from analyzer.models import City, MarketOffer
from decimal import Decimal
from datetime import datetime, timedelta
import random


class Command(BaseCommand):
    help = '–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ä–µ–∞–ª—å–Ω—ã—Ö –∞–¥—Ä–µ—Å–æ–≤'

    def handle(self, *args, **options):
        self.stdout.write("–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ä–µ–∞–ª—å–Ω—ã—Ö –∞–¥—Ä–µ—Å–æ–≤...")

        # –ï–©–ï –ë–û–õ–¨–®–ï –†–ï–ê–õ–¨–ù–´–• –ê–î–†–ï–°–û–í –ï–ö–ê–¢–ï–†–ò–ù–ë–£–†–ì–ê (25 —à—Ç)
        ekb_more = [
            ("—É–ª. –†–æ–∑—ã –õ—é–∫—Å–µ–º–±—É—Ä–≥, 49", "—Ü–µ–Ω—Ç—Ä"),
            ("—É–ª. –ö—É–π–±—ã—à–µ–≤–∞, 55", "—Ü–µ–Ω—Ç—Ä"),
            ("—É–ª. –ß–µ–ª—é—Å–∫–∏–Ω—Ü–µ–≤, 102", "–≤–æ–∫–∑–∞–ª—å–Ω—ã–π"),
            ("—É–ª. –ü–µ—Ä–≤–æ–º–∞–π—Å–∫–∞—è, 72", "–≤–æ–∫–∑–∞–ª—å–Ω—ã–π"),
            ("—É–ª. –¢–æ–∫–∞—Ä–µ–π, 34", "–æ—Ä–¥–∂–æ–Ω–∏–∫–∏–¥–∑–µ–≤—Å–∫–∏–π"),
            ("—É–ª. –°—Ç–∞—á–µ–∫, 45", "–æ—Ä–¥–∂–æ–Ω–∏–∫–∏–¥–∑–µ–≤—Å–∫–∏–π"),
            ("—É–ª. –§—Ä–æ–Ω—Ç–æ–≤—ã—Ö –ë—Ä–∏–≥–∞–¥, 25", "–æ—Ä–¥–∂–æ–Ω–∏–∫–∏–¥–∑–µ–≤—Å–∫–∏–π"),
            ("—É–ª. –ö—Ä–∞—É–ª—è, 82", "–∫–∏—Ä–æ–≤—Å–∫–∏–π"),
            ("—É–ª. –ë–æ–ª—å—à–∞–∫–æ–≤–∞, 90", "–∫–∏—Ä–æ–≤—Å–∫–∏–π"),
            ("—É–ª. –ß–∫–∞–ª–æ–≤–∞, 251", "–∫–∏—Ä–æ–≤—Å–∫–∏–π"),
            ("—É–ª. –ê–º—É–Ω–¥—Å–µ–Ω–∞, 63", "—á–∫–∞–ª–æ–≤—Å–∫–∏–π"),
            ("—É–ª. –ë–∏–ª–∏–º–±–∞–µ–≤—Å–∫–∞—è, 33", "—á–∫–∞–ª–æ–≤—Å–∫–∏–π"),
            ("—É–ª. –©–µ—Ä–±–∞–∫–æ–≤–∞, 41", "—á–∫–∞–ª–æ–≤—Å–∫–∏–π"),
            ("—É–ª. –°–∞–Ω–∞—Ç–æ—Ä–Ω–∞—è, 24", "—É—Ä–∞–ª–º–∞—à"),
            ("—É–ª. –ò–ª—å–∏—á–∞, 6", "—É—Ä–∞–ª–º–∞—à"),
            ("—É–ª. –ë–∞–∫–∏–Ω—Å–∫–∏—Ö –ö–æ–º–∏—Å—Å–∞—Ä–æ–≤, 87", "—É—Ä–∞–ª–º–∞—à"),
            ("—É–ª. –î–∞–Ω–∏–ª—ã –ó–≤–µ—Ä–µ–≤–∞, 25", "—É—Ä–∞–ª–º–∞—à"),
            ("—É–ª. –£—Ä–∞–ª—å—Å–∫–∏—Ö –†–∞–±–æ—á–∏—Ö, 42", "—É—Ä–∞–ª–º–∞—à"),
            ("—É–ª. –ú–∞–Ω–µ–≤—Ä–æ–≤–∞—è, 35", "—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞"),
            ("—É–ª. –ü–µ—Ö–æ—Ç–∏–Ω—Ü–µ–≤, 15", "—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞"),
            ("—É–ª. –°—É—Ö–æ–¥–æ–ª—å—Å–∫–∞—è, 28", "—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞"),
            ("—É–ª. –°–∏–±–∏—Ä—Å–∫–∏–π —Ç—Ä–∞–∫—Ç, 12", "—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞"),
            ("—É–ª. –¢–∫–∞—á–µ–π, 73", "–Ω–∏–∂–Ω–µ–∏—Å–µ—Ç—Å–∫–∏–π"),
            ("—É–ª. –°–µ–ª—å–∫–æ—Ä–æ–≤—Å–∫–∞—è, 55", "–Ω–∏–∂–Ω–µ–∏—Å–µ—Ç—Å–∫–∏–π"),
            ("—É–ª. –Ø—Å–Ω–∞—è, 24", "–∂–∏–ª–æ–π —Ä–∞–π–æ–Ω –∫–æ–º—Å–æ–º–æ–ª—å—Å–∫–∏–π"),
        ]

        # –ï–©–ï –ë–û–õ–¨–®–ï –†–ï–ê–õ–¨–ù–´–• –ê–î–†–ï–°–û–í –ú–û–°–ö–í–´ (30 —à—Ç)
        msk_more = [
            # –ó–ê–û (–ó–∞–ø–∞–¥–Ω—ã–π –æ–∫—Ä—É–≥)
            ("—É–ª. –ö—Ä—ã–ª–∞—Ç—Å–∫–∏–µ –•–æ–ª–º—ã, 30", "–∑–∞–æ"),
            ("—É–ª. –û—Å–µ–Ω–Ω—è—è, 16", "–∑–∞–æ"),
            ("—É–ª. –ö—Ä–µ–º–µ–Ω—á—É–≥—Å–∫–∞—è, 22", "–∑–∞–æ"),
            ("—É–ª. –ö–∞—Å—Ç–∞–Ω–∞–µ–≤—Å–∫–∞—è, 45", "–∑–∞–æ"),
            ("—É–ª. –Ø—Ä—Ü–µ–≤—Å–∫–∞—è, 28", "–∑–∞–æ"),
            ("—É–ª. –ú–æ–ª–æ–¥–æ–≥–≤–∞—Ä–¥–µ–π—Å–∫–∞—è, 52", "–∑–∞–æ"),

            # –°–ó–ê–û (–°–µ–≤–µ—Ä–æ-–ó–∞–ø–∞–¥–Ω—ã–π)
            ("—É–ª. –ì–µ—Ä–æ–µ–≤ –ü–∞–Ω—Ñ–∏–ª–æ–≤—Ü–µ–≤, 25", "—Å–∑–∞–æ"),
            ("—É–ª. –¢—É—Ä–∏—Å—Ç—Å–∫–∞—è, 33", "—Å–∑–∞–æ"),
            ("—É–ª. –°–≤–æ–±–æ–¥—ã, 71", "—Å–∑–∞–æ"),
            ("—É–ª. –ù–∞—Ä–æ–¥–Ω–æ–≥–æ –û–ø–æ–ª—á–µ–Ω–∏—è, 42", "—Å–∑–∞–æ"),
            ("—É–ª. –ú–∞—Ä—à–∞–ª–∞ –ö–∞—Ç—É–∫–æ–≤–∞, 26", "—Å–∑–∞–æ"),

            # –°–ê–û (–°–µ–≤–µ—Ä–Ω—ã–π)
            ("—É–ª. –§–ª–æ—Ç—Å–∫–∞—è, 66", "—Å–∞–æ"),
            ("—É–ª. –õ–∞–≤–æ—á–∫–∏–Ω–∞, 52", "—Å–∞–æ"),
            ("—É–ª. –ó–æ—Ä–≥–µ, 18", "—Å–∞–æ"),
            ("—É–ª. –°–º–æ–ª—å–Ω–∞—è, 55", "—Å–∞–æ"),
            ("—É–ª. –õ–∏—Ö–æ–±–æ—Ä—Å–∫–∞—è –ù–∞–±–µ—Ä–µ–∂–Ω–∞—è, 8", "—Å–∞–æ"),

            # –°–í–ê–û (–°–µ–≤–µ—Ä–æ-–í–æ—Å—Ç–æ—á–Ω—ã–π)
            ("—É–ª. –ê–∫–∞–¥–µ–º–∏–∫–∞ –ö–æ—Ä–æ–ª–µ–≤–∞, 8", "—Å–≤–∞–æ"),
            ("—É–ª. –†–∞–∫–µ—Ç–Ω—ã–π –±—É–ª—å–≤–∞—Ä, 16", "—Å–≤–∞–æ"),
            ("—É–ª. –Ø—Ä–æ—Å–ª–∞–≤—Å–∫–æ–µ —à., 122", "—Å–≤–∞–æ"),
            ("—É–ª. –ú–µ–Ω–∂–∏–Ω—Å–∫–æ–≥–æ, 38", "—Å–≤–∞–æ"),
            ("—É–ª. –ò–∑—É–º—Ä—É–¥–Ω–∞—è, 20", "—Å–≤–∞–æ"),

            # –í–ê–û (–í–æ—Å—Ç–æ—á–Ω—ã–π)
            ("—É–ª. –ü–µ—Ä–≤–æ–º–∞–π—Å–∫–∞—è, 112", "–≤–∞–æ"),
            ("—É–ª. 11-—è –ü–∞—Ä–∫–æ–≤–∞—è, 48", "–≤–∞–æ"),
            ("—É–ª. –ú–µ—Ç–∞–ª–ª—É—Ä–≥–æ–≤, 55", "–≤–∞–æ"),
            ("—É–ª. –ß–µ–ª—è–±–∏–Ω—Å–∫–∞—è, 27", "–≤–∞–æ"),

            # –ó–µ–ª–ê–û (–ó–µ–ª–µ–Ω–æ–≥—Ä–∞–¥)
            ("–≥. –ó–µ–ª–µ–Ω–æ–≥—Ä–∞–¥, –∫. 2017", "–∑–µ–ª–∞–æ"),
            ("–≥. –ó–µ–ª–µ–Ω–æ–≥—Ä–∞–¥, –∫. 2026", "–∑–µ–ª–∞–æ"),
            ("–≥. –ó–µ–ª–µ–Ω–æ–≥—Ä–∞–¥, –∫. 2005", "–∑–µ–ª–∞–æ"),
        ]

        # –ï–©–ï –ë–û–õ–¨–®–ï –†–ï–ê–õ–¨–ù–´–• –ê–î–†–ï–°–û–í –°–ê–ù–ö–¢-–ü–ï–¢–ï–†–ë–£–†–ì–ê (30 —à—Ç)
        spb_more = [
            # –ê–¥–º–∏—Ä–∞–ª—Ç–µ–π—Å–∫–∏–π
            ("—É–ª. –ì–æ—Ä–æ—Ö–æ–≤–∞—è, 46", "–∞–¥–º–∏—Ä–∞–ª—Ç–µ–π—Å–∫–∏–π"),
            ("—É–ª. –ë–æ–ª—å—à–∞—è –ü–æ–¥—å—è—á–µ—Å–∫–∞—è, 30", "–∞–¥–º–∏—Ä–∞–ª—Ç–µ–π—Å–∫–∏–π"),
            ("–Ω–∞–±. —Ä–µ–∫–∏ –ú–æ–π–∫–∏, 96", "–∞–¥–º–∏—Ä–∞–ª—Ç–µ–π—Å–∫–∏–π"),
            ("–ò—Å–∞–∞–∫–∏–µ–≤—Å–∫–∞—è –ø–ª., 5", "–∞–¥–º–∏—Ä–∞–ª—Ç–µ–π—Å–∫–∏–π"),

            # –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π (–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ)
            ("—É–ª. –ù–µ–∫—Ä–∞—Å–æ–≤–∞, 58", "—Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π"),
            ("—É–ª. –ú–∞—è–∫–æ–≤—Å–∫–æ–≥–æ, 25", "—Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π"),
            ("—É–ª. –í–æ—Å—Å—Ç–∞–Ω–∏—è, 45", "—Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π"),
            ("—É–ª. –†–∞–¥–∏—â–µ–≤–∞, 39", "—Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π"),

            # –í—ã–±–æ—Ä–≥—Å–∫–∏–π (–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ)
            ("–ø—Ä. –≠–Ω–≥–µ–ª—å—Å–∞, 33", "–≤—ã–±–æ—Ä–≥—Å–∫–∏–π"),
            ("—É–ª. –ï—Å–µ–Ω–∏–Ω–∞, 24", "–≤—ã–±–æ—Ä–≥—Å–∫–∏–π"),
            ("—É–ª. –•–∞—Ä—á–µ–Ω–∫–æ, 27", "–≤—ã–±–æ—Ä–≥—Å–∫–∏–π"),
            ("—É–ª. –°–∏–∫–µ–π—Ä–æ—Å–∞, 10", "–≤—ã–±–æ—Ä–≥—Å–∫–∏–π"),

            # –ö–∞–ª–∏–Ω–∏–Ω—Å–∫–∏–π (–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ)
            ("—É–ª. –°–æ—Ñ—å–∏ –ö–æ–≤–∞–ª–µ–≤—Å–∫–æ–π, 12", "–∫–∞–ª–∏–Ω–∏–Ω—Å–∫–∏–π"),
            ("—É–ª. –ë—Ä—è–Ω—Ü–µ–≤–∞, 22", "–∫–∞–ª–∏–Ω–∏–Ω—Å–∫–∏–π"),
            ("—É–ª. –ö–∞—Ä–ø–∏–Ω—Å–∫–æ–≥–æ, 35", "–∫–∞–ª–∏–Ω–∏–Ω—Å–∫–∏–π"),
            ("—É–ª. –£—à–∏–Ω—Å–∫–æ–≥–æ, 18", "–∫–∞–ª–∏–Ω–∏–Ω—Å–∫–∏–π"),

            # –ö—Ä–∞—Å–Ω–æ–≥–≤–∞—Ä–¥–µ–π—Å–∫–∏–π
            ("–ø—Ä. –ö–æ—Å—ã–≥–∏–Ω–∞, 28", "–∫—Ä–∞—Å–Ω–æ–≥–≤–∞—Ä–¥–µ–π—Å–∫–∏–π"),
            ("—É–ª. –ü–µ—Ä–µ–¥–æ–≤–∏–∫–æ–≤, 18", "–∫—Ä–∞—Å–Ω–æ–≥–≤–∞—Ä–¥–µ–π—Å–∫–∏–π"),
            ("—É–ª. –õ–µ–Ω—Å–∫–∞—è, 4", "–∫—Ä–∞—Å–Ω–æ–≥–≤–∞—Ä–¥–µ–π—Å–∫–∏–π"),
            ("–ø—Ä. –≠–Ω–µ—Ä–≥–µ—Ç–∏–∫–æ–≤, 35", "–∫—Ä–∞—Å–Ω–æ–≥–≤–∞—Ä–¥–µ–π—Å–∫–∏–π"),

            # –ù–µ–≤—Å–∫–∏–π
            ("–ø—Ä. –û–±—É—Ö–æ–≤—Å–∫–æ–π –û–±–æ—Ä–æ–Ω—ã, 116", "–Ω–µ–≤—Å–∫–∏–π"),
            ("—É–ª. –°–µ–¥–æ–≤–∞, 86", "–Ω–µ–≤—Å–∫–∏–π"),
            ("—É–ª. –ü–æ–¥–≤–æ–π—Å–∫–æ–≥–æ, 40", "–Ω–µ–≤—Å–∫–∏–π"),
            ("—É–ª. –¢–µ–ª—å–º–∞–Ω–∞, 31", "–Ω–µ–≤—Å–∫–∏–π"),

            # –ü—Ä–∏–º–æ—Ä—Å–∫–∏–π
            ("—É–ª. –°–∞–≤—É—à–∫–∏–Ω–∞, 128", "–ø—Ä–∏–º–æ—Ä—Å–∫–∏–π"),
            ("—É–ª. –®–∞–≤—Ä–æ–≤–∞, 15", "–ø—Ä–∏–º–æ—Ä—Å–∫–∏–π"),
            ("—É–ª. –ü–ª–∞–Ω–µ—Ä–Ω–∞—è, 47", "–ø—Ä–∏–º–æ—Ä—Å–∫–∏–π"),
            ("—É–ª. –û–ø—Ç–∏–∫–æ–≤, 45", "–ø—Ä–∏–º–æ—Ä—Å–∫–∏–π"),

            # –ö—É—Ä–æ—Ä—Ç–Ω—ã–π (–ó–µ–ª–µ–Ω–æ–≥–æ—Ä—Å–∫, –°–µ—Å—Ç—Ä–æ—Ä–µ—Ü–∫)
            ("–≥. –ó–µ–ª–µ–Ω–æ–≥–æ—Ä—Å–∫, –ø—Ä. –õ–µ–Ω–∏–Ω–∞, 25", "–∫—É—Ä–æ—Ä—Ç–Ω—ã–π"),
            ("–≥. –°–µ—Å—Ç—Ä–æ—Ä–µ—Ü–∫, —É–ª. –í–æ—Å–∫–æ–≤–∞, 12", "–∫—É—Ä–æ—Ä—Ç–Ω—ã–π"),
        ]

        city_data = {
            '–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥': (ekb_more, 20000),
            '–ú–æ—Å–∫–≤–∞': (msk_more, 60000),
            '–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥': (spb_more, 35000),
        }

        sources = ['avito', 'cian', 'yandex', 'domclick', 'mirkvartir']

        total_added = 0

        for city_name, (addresses, base_price) in city_data.items():
            try:
                city = City.objects.get(name=city_name)
                self.stdout.write(f"\n{'=' * 60}")
                self.stdout.write(f"–î–û–ë–ê–í–õ–ï–ù–ò–ï –ê–î–†–ï–°–û–í: {city_name}")
                self.stdout.write(f"{'=' * 60}")

                added_in_city = 0

                for address, district in addresses:
                    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ—Ç –ª–∏ —É–∂–µ —Ç–∞–∫–æ–≥–æ –∞–¥—Ä–µ—Å–∞
                    if MarketOffer.objects.filter(city=city, address=address).exists():
                        self.stdout.write(f"  ‚ö† –£–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: {address}")
                        continue

                    # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
                    rooms = random.choice([1, 2, 3, 4])
                    area = Decimal(str(round(random.uniform(28.0, 110.0), 1)))

                    # –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ —Ü–µ–Ω—ã –ø–æ —Ä–∞–π–æ–Ω—É
                    price_multiplier = self._get_price_multiplier(city_name, district)

                    # –†–∞—Å—á–µ—Ç —Ü–µ–Ω—ã
                    area_float = float(area)
                    price_float = round(base_price * price_multiplier * (area_float / 40.0), -2)
                    price = Decimal(str(price_float))

                    # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
                    floor = random.randint(1, 25)
                    total_floors = random.randint(5, 25)

                    # –¢–∏–ø —Ä–µ–º–æ–Ω—Ç–∞ (–¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø–æ–ª—è –µ—Å–ª–∏ –µ—Å—Ç—å)
                    repair_types = ['–∫–æ—Å–º–µ—Ç–∏—á–µ—Å–∫–∏–π', '–µ–≤—Ä–æ—Ä–µ–º–æ–Ω—Ç', '–¥–∏–∑–∞–π–Ω–µ—Ä—Å–∫–∏–π', '—Ç—Ä–µ–±—É–µ—Ç —Ä–µ–º–æ–Ω—Ç–∞']

                    # –°–æ–∑–¥–∞–µ–º –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ
                    offer = MarketOffer.objects.create(
                        city=city,
                        source=random.choice(sources),
                        address=address,
                        area=area,
                        rooms=rooms,
                        floor=floor,
                        price=price,
                        url=f"https://{random.choice(['avito', 'cian'])}.ru/{city.slug}/{random.randint(10000, 99999)}",
                        is_active=True,
                        parsed_date=datetime.now() - timedelta(days=random.randint(0, 90)),
                    )

                    added_in_city += 1
                    total_added += 1

                    self.stdout.write(f"  ‚úì {address[:40]}...")
                    self.stdout.write(f"    {area} –º¬≤, {rooms}–∫, {floor}/{total_floors} —ç—Ç. - {price:,.0f} —Ä—É–±.")

                self.stdout.write(f"\n‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –≤ {city_name}: {added_in_city} –∞–¥—Ä–µ—Å–æ–≤")

            except City.DoesNotExist:
                self.stdout.write(self.style.ERROR(f"\n‚úó –ì–æ—Ä–æ–¥ {city_name} –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –±–∞–∑–µ!"))
            except Exception as e:
                self.stdout.write(self.style.ERROR(f"\n‚úó –û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≤ {city_name}: {e}"))

        # –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
        self.stdout.write(self.style.SUCCESS("\n" + "=" * 70))
        self.stdout.write(self.style.SUCCESS("‚úÖ –î–û–ë–ê–í–õ–ï–ù–ò–ï –ó–ê–í–ï–†–®–ï–ù–û!"))
        self.stdout.write("=" * 70)

        self.stdout.write(f"\nüìä –ò–¢–û–ì–û–í–ê–Ø –°–¢–ê–¢–ò–°–¢–ò–ö–ê:")
        self.stdout.write(f"   –í—Å–µ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ: {total_added} –Ω–æ–≤—ã—Ö –∞–¥—Ä–µ—Å–æ–≤")

        # –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –≥–æ—Ä–æ–¥–∞–º
        for city_name in city_data.keys():
            try:
                city = City.objects.get(name=city_name)
                count = MarketOffer.objects.filter(city=city).count()
                self.stdout.write(f"   {city_name}: —Ç–µ–ø–µ—Ä—å {count} –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π")
            except:
                pass

        self.stdout.write(f"\nüìå –î–õ–Ø –û–ë–ù–û–í–õ–ï–ù–ò–Ø –ö–û–û–†–î–ò–ù–ê–¢:")
        self.stdout.write(f"   python manage.py update_coords_batch --delay 2.0 --skip-existing")
        self.stdout.write(f"\nüí° –°–æ–≤–µ—Ç: –∑–∞–ø—É—Å—Ç–∏—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –¥–ª—è –Ω–æ–≤—ã—Ö –∞–¥—Ä–µ—Å–æ–≤!")

    def _get_price_multiplier(self, city_name, district):
        """–ü–æ–ª—É—á–µ–Ω–∏–µ –º–Ω–æ–∂–∏—Ç–µ–ª—è —Ü–µ–Ω—ã –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–∞–π–æ–Ω–∞"""

        # –î–ª—è –ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥–∞
        if city_name == '–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥':
            if district == '—Ü–µ–Ω—Ç—Ä':
                return random.uniform(1.5, 2.2)
            elif district in ['–∞–∫–∞–¥–µ–º–∏—á–µ—Å–∫–∏–π', '–≤–µ—Ä—Ö-–∏—Å–µ—Ç—Å–∫–∏–π']:
                return random.uniform(1.2, 1.6)
            elif district in ['–∫–∏—Ä–æ–≤—Å–∫–∏–π', '—á–∫–∞–ª–æ–≤—Å–∫–∏–π']:
                return random.uniform(1.0, 1.4)
            else:
                return random.uniform(0.8, 1.2)

        # –î–ª—è –ú–æ—Å–∫–≤—ã
        elif city_name == '–ú–æ—Å–∫–≤–∞':
            if district == '—Ü–∞–æ':
                return random.uniform(2.0, 3.0)
            elif district in ['–∑–∞–æ', '—Å–∑–∞–æ']:
                return random.uniform(1.5, 2.2)
            elif district in ['—Å–∞–æ', '—Å–≤–∞–æ', '—é–∑–∞–æ']:
                return random.uniform(1.2, 1.8)
            elif district in ['–≤–∞–æ', '—é–≤–∞–æ', '—é–∞–æ']:
                return random.uniform(1.0, 1.5)
            elif district == '–∑–µ–ª–∞–æ':  # –ó–µ–ª–µ–Ω–æ–≥—Ä–∞–¥
                return random.uniform(0.7, 1.1)
            else:
                return random.uniform(1.0, 1.4)

        # –î–ª—è –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥–∞
        elif city_name == '–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥':
            if district in ['–∞–¥–º–∏—Ä–∞–ª—Ç–µ–π—Å–∫–∏–π', '—Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π']:
                return random.uniform(1.8, 2.5)
            elif district in ['–ø—Ä–∏–º–æ—Ä—Å–∫–∏–π', '–ø–µ—Ç—Ä–æ–≥—Ä–∞–¥—Å–∫–∏–π']:
                return random.uniform(1.4, 2.0)
            elif district in ['–≤—ã–±–æ—Ä–≥—Å–∫–∏–π', '–∫–∞–ª–∏–Ω–∏–Ω—Å–∫–∏–π', '–≤–∞—Å–∏–ª–µ–æ—Å—Ç—Ä–æ–≤—Å–∫–∏–π']:
                return random.uniform(1.2, 1.7)
            elif district in ['–Ω–µ–≤—Å–∫–∏–π', '–∫–∏—Ä–æ–≤—Å–∫–∏–π', '—Ñ—Ä—É–Ω–∑–µ–Ω—Å–∫–∏–π']:
                return random.uniform(1.0, 1.4)
            elif district == '–∫—É—Ä–æ—Ä—Ç–Ω—ã–π':  # –ü—Ä–∏–≥–æ—Ä–æ–¥—ã
                return random.uniform(0.7, 1.1)
            else:
                return random.uniform(1.0, 1.5)

        # –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é
        return random.uniform(0.9, 1.3)